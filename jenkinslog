Started by user Nibros

Obtained Jenkinsfile from git git@github.com:nibroos/elearning-go.git
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins
 in /var/jenkins_home/workspace/e-learning/build-test
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: git
using credential 2dcfa3e4-fa4d-4702-a362-4ace13f87646
Cloning the remote Git repository
Cloning repository git@github.com:nibroos/elearning-go.git
 > git init /var/jenkins_home/workspace/e-learning/build-test # timeout=10
Fetching upstream changes from git@github.com:nibroos/elearning-go.git
 > git --version # timeout=10
 > git --version # 'git version 2.39.5'
using GIT_SSH to set credentials 
Verifying host key using known hosts file
 > git fetch --tags --force --progress -- git@github.com:nibroos/elearning-go.git +refs/heads/*:refs/remotes/origin/* # timeout=10

 > git config remote.origin.url git@github.com:nibroos/elearning-go.git # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
 > git rev-parse origin/build-test^{commit} # timeout=10
Checking out Revision 3b6cba5cbbf1b368ab899bbca622a6539c02b7b7 (origin/build-test)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 3b6cba5cbbf1b368ab899bbca622a6539c02b7b7 # timeout=10
Commit message: "wip: using docker compose plugin ðŸš§"
 > git rev-list --no-walk 7cf45ac9ae8faf0837cdbfa5f68640dc879838b1 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withCredentials
Masking supported pattern matches of $POSTGRES_USER or $GATEWAY_PORT or $POSTGRES_HOST or $SERVICE_REST_PORT or $SERVICE_GRPC_PORT or $POSTGRES_PASSWORD or $POSTGRES_PORT or $POSTGRES_DB or $VPS_DEPLOY_DIR or $VPS_USER or $JWT_SECRET or $VPS_HOST or $MASTER_SERVICE_GRPC_PORT or $MASTER_SERVICE_REST_PORT or $ACTIVITIES_SERVICE_GRPC_PORT or $ACTIVITIES_SERVICE_REST_PORT
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Clone Repository on VPS)
[Pipeline] script
[Pipeline] {
[Pipeline] sshagent
[ssh-agent] Using credentials nibros_do_server
$ ssh-agent
SSH_AUTH_SOCK=/tmp/ssh-XXXXXXcmgyKb/agent.504509
SSH_AGENT_PID=504512
Running ssh-add (command line suppressed)
Identity added: /var/jenkins_home/workspace/e-learning/build-test@tmp/private_key_9593387919655885362.key (nibrosmaverick3@gmail.com)
[ssh-agent] Started.
[Pipeline] {
[Pipeline] sh
Warning: A secret was passed to "sh" using Groovy String interpolation, which is insecure.
		 Affected argument(s) used the following variable(s): [VPS_DEPLOY_DIR, VPS_USER, VPS_HOST]
		 See https://jenkins.io/redirect/groovy-string-interpolation for details.

+ ssh-keyscan -H github.com
# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234

# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234
+ ssh -A -o StrictHostKeyChecking=no ****@**** ssh-keyscan -H github.com >> ~/.ssh/known_hosts

# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234

# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234
# github.com:22 SSH-2.0-babeld-33cdb9234
+ echo Testing SSH connection...
Testing SSH connection...
+ ssh -A -o StrictHostKeyChecking=no ****@**** source ~/.bashrc; echo "SSH connection successful!"

SSH connection successful!
+ echo Cloning repository...
Cloning repository...
+ ssh -A -o StrictHostKeyChecking=no ****@**** rm -rf **** &&
              git clone git@github.com:nibroos/elearning-go.git ****
Cloning into ****...

[Pipeline] }
$ ssh-agent -k
unset SSH_AUTH_SOCK;
unset SSH_AGENT_PID;
echo Agent pid 504512 killed;
[ssh-agent] Stopped.
[Pipeline] // sshagent
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build & Deploy)
[Pipeline] script
[Pipeline] {
[Pipeline] sshagent
[ssh-agent] Using credentials nibros_do_server
$ ssh-agent
SSH_AUTH_SOCK=/tmp/ssh-XXXXXXMtmVQN/agent.504563
SSH_AGENT_PID=504566
Running ssh-add (command line suppressed)
Identity added: /var/jenkins_home/workspace/e-learning/build-test@tmp/private_key_7823083235763328051.key (nibrosmaverick3@gmail.com)
[ssh-agent] Started.
[Pipeline] {
[Pipeline] sh
Warning: A secret was passed to "sh" using Groovy String interpolation, which is insecure.
		 Affected argument(s) used the following variable(s): [VPS_DEPLOY_DIR, VPS_USER, VPS_HOST]
		 See https://jenkins.io/redirect/groovy-string-interpolation for details.

+ ssh -A -o StrictHostKeyChecking=no ****@**** 
                cd **** &&
                docker compose -f docker/docker-compose.yml up --build -d > build_output.log 2>&1
              
[Pipeline] }
$ ssh-agent -k
unset SSH_AUTH_SOCK;
unset SSH_AGENT_PID;
echo Agent pid 504566 killed;
[ssh-agent] Stopped.
[Pipeline] // sshagent
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Run Migrations)
Stage "Run Migrations" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Check Logs)
Stage "Check Logs" skipped due to earlier failure(s)
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] cleanWs
[WS-CLEANUP] Deleting project workspace...
[WS-CLEANUP] Deferred wipeout is used...
[WS-CLEANUP] done
[Pipeline] script
[Pipeline] {
[Pipeline] echo
Build failed. Keeping the previous build up and running.
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node

[Pipeline] End of Pipeline
ERROR: script returned exit code 14
Finished: FAILURE
